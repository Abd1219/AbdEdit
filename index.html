<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AbdEdit - Editor de Im√°genes</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <img src="logo.png" alt="AbdEdit" class="logo" id="appLogo">
            <div class="file-controls">
                <input type="file" id="imageInput" accept="image/*" style="display: none;">
                
                <div class="button-group">
                    <button onclick="document.getElementById('imageInput').click()" class="btn-primary">
                        üìÅ Cargar
                    </button>
                    <button onclick="app.exportImage()" class="btn-secondary">
                        üíæ Descargar
                    </button>
                </div>
                
                <div class="button-group">
                    <button onclick="app.undo()" class="btn-undo" title="Deshacer (Ctrl+Z)">
                        ‚Ü∂
                    </button>
                    <button onclick="app.redo()" class="btn-redo" title="Rehacer (Ctrl+Y)">
                        ‚Ü∑
                    </button>
                </div>
                
                <div class="button-group">
                    <button onclick="app.deleteSelectedAnnotation()" class="btn-delete" id="deleteBtn" style="display: none;" title="Eliminar (Delete)">
                        üóëÔ∏è
                    </button>
                    <button onclick="app.clearAnnotations()" class="btn-danger">
                        üóëÔ∏è Limpiar Todo
                    </button>
                </div>
            </div>
        </header>

        <div class="toolbar">
            <div class="tool-group">
                <button class="tool-btn active" data-tool="pencil" title="L√°piz">
                    ‚úèÔ∏è
                </button>
                
                <!-- Men√∫ desplegable de l√≠neas y flechas -->
                <div class="tool-dropdown">
                    <button class="tool-btn" id="arrowBtn" title="L√≠neas y Flechas">
                        ‚û°Ô∏è
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div class="dropdown-menu" id="arrowMenu">
                        <button class="dropdown-item" data-tool="line">
                            ‚îÄ L√≠nea
                        </button>
                        <button class="dropdown-item" data-tool="arrow">
                            ‚û°Ô∏è Flecha Recta
                        </button>
                        <button class="dropdown-item" data-tool="curved-arrow">
                            ‚Ü™Ô∏è Flecha Curva
                        </button>
                        <button class="dropdown-item" data-tool="measure-arrow">
                            üìê Flecha con Medida
                        </button>
                    </div>
                </div>
                
                <!-- Men√∫ desplegable de formas -->
                <div class="tool-dropdown">
                    <button class="tool-btn" id="shapeBtn" title="Formas">
                        ‚¨ú
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div class="dropdown-menu" id="shapeMenu">
                        <button class="dropdown-item" data-tool="rectangle">
                            ‚¨ú Rect√°ngulo
                        </button>
                        <button class="dropdown-item" data-tool="ellipse">
                            ‚≠ï Elipse
                        </button>
                        <button class="dropdown-item" data-tool="triangle">
                            üî∫ Tri√°ngulo
                        </button>
                        <button class="dropdown-item" data-tool="angle">
                            ‚à† √Ångulo
                        </button>
                        <button class="dropdown-item" data-tool="polygon">
                            ‚óá Forma Libre (4 puntos)
                        </button>
                    </div>
                </div>
                
                <button class="tool-btn" data-tool="text" title="Texto">
                    üìù
                </button>
                
                <button onclick="app.editSelectedText()" class="btn-edit-text" id="editTextBtn" style="display: none;" title="Editar Texto Seleccionado">
                    ‚úèÔ∏è
                </button>
                
                <input type="color" id="colorPicker" value="#ff0000" title="Color">
            </div>

            <div class="tool-group">
                <label>Grosor:</label>
                <input type="range" id="strokeWidth" min="1" max="50" value="12">
                <span id="strokeValue">12</span>
            </div>

        </div>

        <div class="canvas-container">
            <canvas id="canvas"></canvas>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
